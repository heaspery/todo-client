var w=(o,e)=>()=>(e||o((e={exports:{}}).exports,e),e.exports);var r=(o,e,n)=>new Promise((a,t)=>{var s=d=>{try{l(n.next(d))}catch(g){t(g)}},c=d=>{try{l(n.throw(d))}catch(g){t(g)}},l=d=>d.done?a(d.value):Promise.resolve(d.value).then(s,c);l((n=n.apply(o,e)).next())});var A=w(i=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function n(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(t){if(t.ep)return;t.ep=!0;const s=n(t);fetch(t.href,s)}})();const b=()=>!!localStorage.getItem("token"),u=o=>{document.querySelector(".message").textContent=o},y=()=>{const o=b();document.querySelectorAll(".requires-auth").forEach(e=>e.classList.toggle("hidden",!o)),document.querySelectorAll(".requires-unauth").forEach(e=>e.classList.toggle("hidden",o))},S=o=>{document.querySelectorAll("form").forEach(e=>e.classList.remove("active")),document.querySelector(`form[name='${o}']`).classList.add("active"),document.querySelectorAll(".tab").forEach(e=>e.classList.remove("active")),document.querySelector(`.tab#${o}`).classList.add("active")},L=()=>{document.querySelector(".tab-container").addEventListener("click",o=>{o.target.classList.contains("tab")&&S(o.target.id)})},v=document.querySelector('form[name="signup"] button'),f=document.querySelector('form[name="signup"]'),E=document.querySelector('form[name="login"] button'),q=document.querySelector('form[name="login"]'),T=document.querySelector('button[name="logout"]'),p=document.querySelector("ul");v.addEventListener("click",o=>r(i,null,function*(){o.preventDefault();const e=new FormData(f),n=e.get("email"),a=e.get("password");if(a&&n)try{yield D(n,a)}catch(t){console.log(t)}f.reset()}));E.addEventListener("click",o=>r(i,null,function*(){o.preventDefault();const e=new FormData(q),n=e.get("email"),a=e.get("password");try{const c=yield(yield fetch("https://progweb-todo-api.onrender.com/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:a})})).json();return c.status=="success"&&(localStorage.setItem("token",c.token),y(),m()),u(c.status),c}catch(t){console.log(t)}}));T.addEventListener("click",o=>{localStorage.clear(),y()});const D=(o,e)=>r(i,null,function*(){const t=yield(yield fetch("https://progweb-todo-api.onrender.com/users/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o,password:e})})).json();return u(t.message),t}),O=()=>r(i,null,function*(){const o=localStorage.getItem("token");try{return yield(yield fetch("https://progweb-todo-api.onrender.com/todos/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`}})).json()}catch(e){console.log(e)}}),m=()=>r(i,null,function*(){p.innerHTML="";const o=yield O();console.log(o),o.todos.forEach(e=>{const n=document.createElement("li");n.id=e.id;const a=document.createElement("p");a.classList.add("body"),a.textContent=e.body;const t=document.createElement("p");t.classList.add("tags"),t.textContent=e.tags;const s=document.createElement("div");s.classList.add("delete"),n.appendChild(a),n.appendChild(t),n.appendChild(s),p.appendChild(n)})}),C=document.querySelector("form[name='todo'] button"),h=document.querySelector("form[name='todo']");C.addEventListener("click",o=>r(i,null,function*(){o.preventDefault();const e=new FormData(h),n=localStorage.getItem("token"),a=e.get("body"),t=e.get("tags"),s={body:a,tags:t};console.log(s);try{const l=yield(yield fetch("https://progweb-todo-api.onrender.com/todos/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify(s)})).json();u(l.message),yield m()}catch(c){console.log(c)}}));p.addEventListener("click",o=>r(i,null,function*(){if(o.target.outerHTML=='<div class="delete"></div>'){console.log("delete");const e=localStorage.getItem("token"),n=o.target.parentElement.id;console.log(n);try{const a=yield fetch(`https://progweb-todo-api.onrender.com/todos/${n}`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`}});h.reset();const t=yield a.json();u(t.message),yield m()}catch(a){console.log(a)}}else console.log("non")}));const k=()=>r(i,null,function*(){y(),L(),yield m()});k()});export default A();
